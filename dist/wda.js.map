{"version":3,"file":"wda.js","sources":["../src/util/sleep.ts","../src/util/httpdo.ts","../src/instance/httpclient.ts","../src/instance/alert.ts","../src/config/xcuiElementTypes.ts","../src/instance/Rect.ts","../src/instance/element.ts","../src/instance/selector.ts","../src/instance/session.ts","../src/instance/client.ts","../src/main.ts"],"sourcesContent":["function sleep(time: number): Promise<void> {\n  return new Promise((reslove) => {\n    setTimeout(() => {\n      reslove()\n    }, time)\n  })\n}\n\nexport default sleep","import sleep from '../util/sleep'\nimport axios, { AxiosResponse } from 'axios'\n\nasync function httpdo(url: string, method: string = 'GET', payload?: any): Promise<any> {\n  // const startTime = new Date().getTime()\n\n  const options = {\n    url,\n    method,\n    data: payload\n  }\n\n  // Do HTTP Request\n  // console.log(`Shell: curl -X ${method} -d '${payload}' '${url}'`)\n  let res: AxiosResponse\n  try {\n    res = await axios(options)\n\n  } catch (e) {\n    // console.log(`retry to connect, error: ${e}`)\n    await sleep(1000)\n    res = await axios(options)\n  }\n  const retjson = res.data\n  // console.log(`Return {{${new Date().getTime() - startTime}ms}}`, retjson)\n  return retjson\n}\n\nexport default httpdo\n","import httpdo from '../util/httpdo'\n\nfunction combineURLs(baseURL: string, relativeURL: string) {\n  return relativeURL\n    ? baseURL.replace(/\\/+$/, '') + '/' + relativeURL.replace(/^\\/+/, '')\n    : baseURL;\n}\n\nclass HTTPClient {\n  address: string\n  alertCallback: Function | undefined\n\n  constructor(address: string, alertCallback?: Function) {\n    this.address = address\n    this.alertCallback = alertCallback\n  }\n\n  newClient(path: string) {\n    return new HTTPClient(combineURLs(this.address, path), this.alertCallback)\n  }\n\n  async fetch(method: string, url: string, data?: any) {\n    return await this.fetchNoAlert(method, url, data)\n  }\n\n  protected async fetchNoAlert(method: string, queryUrl: string, data?: any, depth?: number): Promise<any> {\n    const targetUrl = combineURLs(this.address, queryUrl)\n\n    try {\n      return await httpdo(targetUrl, method, data)\n    } catch (e) {\n      if (depth && depth >= 10) {\n        return Promise.reject(e)\n      }\n      this.alertCallback && this.alertCallback()\n      return await this.fetchNoAlert(method, queryUrl, data, (depth || 0) + 1)\n    }\n  }\n}\n\nexport default HTTPClient\n","import Session from './session'\nimport HTTPClient from './httpclient'\nimport sleep from '../util/sleep'\n\nclass Alert {\n  s: Session\n  http: HTTPClient\n\n  constructor(session: Session) {\n    this.s = session\n    this.http = session.http\n  }\n\n  async exists() {\n    let text: string\n    try {\n      text = await this.text()\n    } catch (e) {\n      return false\n    }\n    return !!text\n  }\n\n  async text() {\n    const { value } = await this.http.fetch('get', '/alert/text')\n    return typeof value === 'string' ? value : ''\n  }\n\n  async wait(timeout: number = 20) {\n    const startTime = new Date().getTime()\n    while (new Date().getTime() - startTime < (timeout * 1000)) {\n      if (await this.exists()) {\n        return true\n      }\n      await sleep(20)\n    }\n    return false\n  }\n\n  accept() {\n    return this.http.fetch('post', '/alert/accept')\n  }\n\n  dismiss() {\n    return this.http.fetch('post', '/alert/dismiss')\n  }\n\n  async buttons() {\n    const { value } = await this.http.fetch('get', '/wda/alert/buttons')\n\n    return value\n  }\n\n  /**\n   * @param name the name of the button\n   */\n  click(name: string) {\n    return this.http.fetch('post', '/alert/accept', { name })\n  }\n}\n\nexport default Alert","const ELEMENTS = [\n  'Any',\n  'Other',\n  'Application',\n  'Group',\n  'Window',\n  'Sheet',\n  'Drawer',\n  'Alert',\n  'Dialog',\n  'Button',\n  'RadioButton',\n  'RadioGroup',\n  'CheckBox',\n  'DisclosureTriangle',\n  'PopUpButton',\n  'ComboBox',\n  'MenuButton',\n  'ToolbarButton',\n  'Popover',\n  'Keyboard',\n  'Key',\n  'NavigationBar',\n  'TabBar',\n  'TabGroup',\n  'Toolbar',\n  'StatusBar',\n  'Table',\n  'TableRow',\n  'TableColumn',\n  'Outline',\n  'OutlineRow',\n  'Browser',\n  'CollectionView',\n  'Slider',\n  'PageIndicator',\n  'ProgressIndicator',\n  'ActivityIndicator',\n  'SegmentedControl',\n  'Picker',\n  'PickerWheel',\n  'Switch',\n  'Toggle',\n  'Link',\n  'Image',\n  'Icon',\n  'SearchField',\n  'ScrollView',\n  'ScrollBar',\n  'StaticText',\n  'TextField',\n  'SecureTextField',\n  'DatePicker',\n  'TextView',\n  'Menu',\n  'MenuItem',\n  'MenuBar',\n  'MenuBarItem',\n  'Map',\n  'WebView',\n  'IncrementArrow',\n  'DecrementArrow',\n  'Timeline',\n  'RatingIndicator',\n  'ValueIndicator',\n  'SplitGroup',\n  'Splitter',\n  'RelevanceIndicator',\n  'ColorWell',\n  'HelpTag',\n  'Matte',\n  'DockItem',\n  'Ruler',\n  'RulerMarker',\n  'Grid',\n  'LevelIndicator',\n  'Cell',\n  'LayoutArea',\n  'LayoutItem',\n  'Handle',\n  'Stepper',\n  'Tab'\n]\n\nexport default ELEMENTS\n","class Rect {\n  x: number\n  y: number\n  width: number\n  height: number\n\n  constructor(x: number, y: number, width: number, height: number) {\n    this.x = x\n    this.y = y\n    this.width = width\n    this.height = height\n  }\n\n  getCenter() {\n    const [x, y] = [this.x + this.width / 2, this.y + this.height / 2]\n    return [x, y]\n  }\n\n  getOrigin() {\n    const { x, y } = this\n    return [x, y]\n  }\n\n  getLeft() {\n    return this.x\n  }\n\n  getTop() {\n    return this.y\n  }\n\n  getRight() {\n    return this.x + this.width\n  }\n\n  getBottom() {\n    return this.y + this.height\n  }\n}\n\nexport default Rect\n","import HTTPClient from './httpclient'\nimport Rect from './Rect'\n\nclass Element {\n  http: HTTPClient\n  private id: string\n  constructor(httpclient: HTTPClient, id: string) {\n    this.http = httpclient\n    this.id = id\n  }\n\n  private req(method: string, url: string, data?: any) {\n    return this.http.fetch(method, '/element/' + this.id + url, data)\n  }\n\n  private wdaReq(method: string, url: string, data?: any) {\n    return this.http.fetch(method, '/wda/element/' + this.id + url, data)\n  }\n\n  private async prop(key: string) {\n    const { value } = await this.req('get', '/' + key.replace(/\\/$/, ''))\n    return value\n  }\n\n  private async wdaProp(key: string) {\n    const { value } = await this.wdaReq('get', '/' + key.replace(/\\/$/, ''))\n    return value\n  }\n\n  getId() {\n    return this.id\n  }\n\n  async getLabel() {\n    return await this.prop('attribute/label')\n  }\n\n  async getClassName() {\n    return await this.prop('attribute/type')\n  }\n\n  async getText() {\n    return await this.prop('text')\n  }\n\n  async getName() {\n    return await this.prop('name')\n  }\n\n  async getDisplayed() {\n    return await this.prop('displayed')\n  }\n\n  async getEnabled() {\n    return await this.prop('enabled')\n  }\n\n  async getValue() {\n    return await this.prop('value')\n  }\n\n  async getVisible() {\n    return await this.prop('visible')\n  }\n\n  async getBounds() {\n    const value = await this.prop('rect')\n    const { x, y, width: w, height: h } = value\n    return new Rect(x, y, w, h)\n  }\n\n  async getAccessible() {\n    return await this.wdaProp('accessible')\n  }\n\n  async getAccessibilityContainer() {\n    return await this.wdaProp('accessibilityContainer')\n  }\n\n  // operations\n  async tap() {\n    return await this.req('post', '/click')\n  }\n\n  async click() {\n    // Alias of tap\n    return await this.tap()\n  }\n\n  /** Tap and hold for a moment\n   * @param duration seconds of hold time\n   * [[FBRoute POST:@\"/wda/element/:uuid/touchAndHold\"] respondWithTarget:self action:@selector(handleTouchAndHold:)]\n   */\n  async tapHold(duration: number = 1) {\n    return await this.wdaReq('post', '/touchAndHold', { 'duration': duration })\n  }\n\n  /**\n   * \n   * @param direction one of \"visible\", \"up\", \"down\", \"left\", \"right\"\n   * @param distance swipe distance, only works when direction is not \"visible\"\n   * \n   * distance=1.0 means, element (width or height) multiply 1.0\n   */\n  async scroll(direction: \"visible\" | \"up\" | \"down\" | \"left\" | \"right\" = 'visible', distance: number = 1.0) {\n    if (direction === \"visible\") {\n      return await this.wdaReq('post', '/scroll', { 'toVisible': true })\n    } else if (['up', 'down', 'left', 'right'].indexOf(direction) > -1) {\n      return await this.wdaReq('post', '/scroll', { 'direction': direction, 'distance': distance })\n    } else {\n      throw \"Invalid direction\"\n    }\n  }\n\n  /**\n   * \n   * @param scale scale must > 0\n   * @param velocity velocity must be less than zero when scale is less than 1\n   * Example:\n            pinchIn  -> scale:0.5, velocity: -1\n            pinchOut -> scale:2.0, velocity: 1\n   */\n  async pinch(scale: number, velocity: number) {\n    return await this.wdaReq('post', '/pinch', { scale, velocity })\n  }\n\n  async setText(value: string) {\n    return await this.req('post', '/value', { 'value': value })\n  }\n\n  async clearText() {\n    return await this.req('post', '/clear')\n  }\n}\n\nexport default Element\n","import Session from \"./session\";\nimport HTTPClient from './httpclient'\nimport ELEMENTS from '../config/xcuiElementTypes'\nimport sleep from '../util/sleep'\nimport Element from './element'\n\ninterface SelectorObj {\n  predicate: string // predicate string\n  id: string // raw identifier\n  className: string // attr of className\n  type: string // alias of className\n  name: string // attr for name\n  nameContains: string // attr of name contains\n  nameMatches: string // regex string\n  text: string // alias of name\n  textContains: string // alias of nameContains\n  textMatches: string // alias of nameMatches\n  value: string // attr of value, not used in most times\n  valueContains: string // attr of value contains\n  label: string // attr for label\n  labelContains: string // attr for label contains\n  visible: boolean // is visible\n  enabled: boolean // is enabled\n  classChain: string // string of ios chain query, eg: **/XCUIElementTypeOther[`value BEGINSWITH 'blabla'`]\n  xpath: string // xpath string, a little slow, but works fine\n  timeout: number // maxium wait element time, default 10.0s\n  index: number // index of founded elements\n  parentClassChains: string[]\n}\n\nclass Selector {\n  http: HTTPClient\n  session: Session\n\n  predicate: string\n  id: string\n  className: string\n  name: string\n  namePart: string\n  nameRegex: string\n  value: string\n  valuePart: string\n  label: string\n  labelPart: string\n  visible: boolean\n  enabled: boolean\n  index: number\n  xpath: string\n  classChain: string\n  timeout: number\n  parentClassChains: string[]\n\n  // WDA use two key to find elements \"using\", \"value\"\n  // Examples:\n  // \"using\" can be on of \n  //     \"partial link text\", \"link text\"\n  //     \"name\", \"id\", \"accessibility id\"\n  //     \"class name\", \"class chain\", \"xpath\", \"predicate string\"\n\n  // predicate string support many keys\n  //     UID,\n  //     accessibilityContainer,\n  //     accessible,\n  //     enabled,\n  //     frame,\n  //     label,\n  //     name,\n  //     rect,\n  //     type,\n  //     value,\n  //     visible,\n  //     wdAccessibilityContainer,\n  //     wdAccessible,\n  //     wdEnabled,\n  //     wdFrame,\n  //     wdLabel,\n  //     wdName,\n  //     wdRect,\n  //     wdType,\n  //     wdUID,\n  //     wdValue,\n  //     wdVisible\n  constructor(httpclient: HTTPClient, session: Session, selectorObj: SelectorObj) {\n    this.http = httpclient\n    this.session = session\n\n    this.predicate = selectorObj.predicate\n    this.id = selectorObj.id\n    this.className = selectorObj.className || selectorObj.type\n    this.name = this.addEscapeCharacterForQuotePrimeCharacter(selectorObj.name || selectorObj.text)\n    this.namePart = selectorObj.nameContains || selectorObj.textContains\n    this.nameRegex = selectorObj.nameMatches || selectorObj.textMatches\n    this.value = selectorObj.value\n    this.valuePart = selectorObj.valueContains\n    this.label = selectorObj.label\n    this.labelPart = selectorObj.labelContains\n    this.enabled = selectorObj.enabled\n    this.visible = selectorObj.visible\n    this.index = selectorObj.index || 0\n\n    this.xpath = this.fixXcuiType(selectorObj.xpath)\n    this.classChain = this.fixXcuiType(selectorObj.classChain)\n    this.timeout = selectorObj.timeout || 10\n    this.parentClassChains = selectorObj.parentClassChains || []\n\n    // some fixtures\n    if (this.className && !this.className.startsWith('XCUIElementType')) {\n      this.className = 'XCUIElementType' + this.className\n    }\n\n    if (this.nameRegex) {\n      if (!this.nameRegex.startsWith('^') && this.nameRegex.startsWith('.*')) {\n        this.nameRegex = '.*' + this.nameRegex\n      }\n      if (!this.nameRegex.endsWith('$') && !this.nameRegex.endsWith('.*')) {\n        this.nameRegex = this.nameRegex + '.*'\n      }\n    }\n  }\n\n  /**\n   * Fix for https://github.com/openatx/facebook-wda/issues/33\n   *    \n   * @param v\n   * @return string with properly formated quotes, or non changed text\n   */\n  private addEscapeCharacterForQuotePrimeCharacter(text: string = '') {\n    return text.replace(\"'\", \"\\\\'\").replace('\"', '\\\\\"')\n  }\n\n  private fixXcuiType(s: string) {\n    if (!s) return ''\n    const reElement = ELEMENTS.join('|')\n\n    return s.replace(new RegExp(\"(\" + reElement + \")\"), a => 'XCUIElementType' + a)\n  }\n\n  /**\n    HTTP example response:\n    [\n        {\"ELEMENT\": \"E2FF5B2A-DBDF-4E67-9179-91609480D80A\"},\n        {\"ELEMENT\": \"597B1A1E-70B9-4CBE-ACAD-40943B0A6034\"}\n    ]\n   */\n  private async wdasearch(using: string, value: string): Promise<any[]> {\n    const elementIds: any[] = []\n    let { value: data } = await this.http.fetch('post', '/elements', { using, value })\n    data = typeof data === 'string' ? [] : data\n\n    data.forEach((d: any) => {\n      elementIds.push(d['ELEMENT'])\n    })\n    return elementIds\n  }\n\n  // just return if aleady exists predicate\n  private genClassChain() {\n    if (this.predicate) {\n      return '/XCUIElementTypeAny[`' + this.predicate + '`]'\n    }\n\n    const qs: string[] = []\n    if (this.name) {\n      qs.push(`name == '${this.name}'`)\n    }\n    if (this.namePart) {\n      qs.push(`name CONTAINS '${this.namePart}'`)\n    }\n    if (this.nameRegex) {\n      qs.push(`name MATCHES '${this.nameRegex}'`)\n    }\n    if (this.label) {\n      qs.push(`label == '${this.label}'`)\n    }\n    if (this.labelPart) {\n      qs.push(`label CONTAINS '${this.labelPart}'`)\n    }\n    if (this.value) {\n      qs.push(`value == '${this.value}'`)\n    }\n    if (this.valuePart) {\n      qs.push(`value CONTAINS ’${this.valuePart}'`)\n    }\n    if (this.visible !== null && this.visible !== undefined) {\n      qs.push(`visible == ${this.visible.toString()}`)\n    }\n    if (this.enabled !== null && this.enabled !== undefined) {\n      qs.push(`enabled == ${this.enabled.toString()}`)\n    }\n    const predicate = qs.join(' AND ')\n    let chain = '/' + (this.className || 'XCUIElementTypeAny')\n    if (predicate) {\n      chain = chain + '[`' + predicate + '`]'\n    }\n    if (this.index) {\n      chain = chain + `[${this.index}]`\n    }\n    return chain\n  }\n\n  findElementIds() {\n    if (this.id)\n      return this.wdasearch('id', this.id)\n    if (this.predicate)\n      return this.wdasearch('predicate string', this.predicate)\n    if (this.xpath)\n      return this.wdasearch('xpath', this.xpath)\n    if (this.classChain)\n      return this.wdasearch('class chain', this.classChain)\n\n    const chain = '**' + this.parentClassChains.join() + this.genClassChain()\n    return this.wdasearch('class chain', chain)\n  }\n\n  // return Element (list): all the elements\n  async findElements() {\n    const es: any[] = []\n    const ids = await this.findElementIds()\n    ids.forEach(id => {\n      const e = new Element(this.http.newClient(''), id)\n      es.push(e)\n    })\n    return es\n  }\n\n  async count() {\n    const ids = await this.findElementIds()\n    return ids.length\n  }\n\n  /**\n   * \n   * @param timeout timeout for query element, unit seconds Default 10s\n   * @return Element: UI Element\n   */\n  async get(timeout: number = this.timeout): Promise<Element> {\n    const startTime = new Date().getTime()\n    while (true) {\n      const elems = await this.findElements()\n      if (elems.length > 0) {\n        return elems[0]\n      }\n      if (startTime + (timeout * 1000) < new Date().getTime()) {\n        break\n      }\n      await sleep(10)\n    }\n    // check alert again\n    const exists = await this.session.alert().exists()\n    if (exists && this.http.alertCallback) {\n      this.http.alertCallback()\n      return await this.get(timeout)\n    }\n    return Promise.reject([])\n  }\n\n  // Set element wait timeout\n  setTimeout(s: number) {\n    this.timeout = s\n    return this\n  }\n\n  child(selectorObj: SelectorObj) {\n    const chain = this.genClassChain()\n    selectorObj['parentClassChains'] = this.parentClassChains.concat([chain])\n    return new Selector(this.http, this.session, selectorObj)\n  }\n\n  async exists() {\n    const ids = await this.findElementIds()\n    return ids.length > this.index\n  }\n\n  /**\n   * Wait element and perform click\n   * @param timeout timeout for wait\n   * @returns bool: if successfully clicked\n   */\n  async clickExists(timeout: number = 0) {\n    let e: Element\n    try {\n      e = await this.get(timeout)\n    } catch (e) {\n      return false\n    }\n    await e.click()\n    return true\n  }\n\n  /**\n   * alias of get\n   * @param timeout timeout seconds\n   */\n  async wait(timeout: number = this.timeout) {\n    return await this.get(timeout)\n  }\n\n  async waitGone(timeout: number = this.timeout) {\n    const startTime = new Date().getTime()\n    while (startTime + (timeout * 1000) > new Date().getTime()) {\n      if (!await this.exists()) {\n        return true\n      }\n    }\n    return false\n  }\n}\n\nexport default Selector\nexport {\n  SelectorObj\n}\n","import HTTPClient from './httpclient'\nimport Alert from './alert'\nimport Selector, { SelectorObj } from './selector'\n\nclass Session {\n  http: HTTPClient\n  capabilities: any\n  alertCallback: Function\n  private sid: string\n\n  /**\n   * @param httpclient HTTPClient\n   * @param value get status object\n   */\n  constructor(httpclient: HTTPClient, value: any) {\n    this.http = httpclient\n\n    // Example session value\n    // \"capabilities\": {\n    //     \"CFBundleIdentifier\": \"com.netease.aabbcc\",\n    //     \"browserName\": \"?????\",\n    //     \"device\": \"iphone\",\n    //     \"sdkVersion\": \"10.2\"\n    // }\n    this.capabilities = value.capabilities\n    this.sid = value.sessionId\n  }\n\n  protected getId() {\n    return this.sid\n  }\n\n  // the session matched bundle id\n  protected getBundleId() {\n    return this.capabilities.CFBundleIdentifier\n  }\n\n  /**\n   * @param callback called when alert popup\n   */\n  setAlertCallback(callback: Function) {\n    this.alertCallback = callback\n  }\n\n  /**\n   * TODO: Never successed using before.\n   * https://github.com/facebook/WebDriverAgent/blob/master/WebDriverAgentLib/Commands/FBSessionCommands.m#L43\n   * \n   * @param url string\n   */\n  async openUrl(url: string) {\n    return await this.http.fetch('post', 'url', { 'url': url })\n  }\n\n  lock() {\n    return this.http.fetch('post', '/wda/lock')\n  }\n\n  unlock() {\n    return this.http.fetch('post', '/wda/unlock')\n  }\n\n  /**\n   * @param duration deactivate time, seconds\n   */\n  deactivate(duration: number) {\n    return this.http.fetch('post', '/wda/deactivateApp', { duration })\n  }\n\n  tap(x: number, y: number) {\n    return this.http.fetch('post', '/wda/tap/0', { x, y })\n  }\n\n  doubleTap(x: number, y: number) {\n    return this.http.fetch('post', '/wda/doubleTap', { x, y })\n  }\n\n  /**\n   * Tap and hold for a moment\n   * @param x position x\n   * @param y position y\n   * @param duration seconds of hold time\n   * \n   * [[FBRoute POST:@\"/wda/touchAndHold\"] respondWithTarget:self action:@selector(handleTouchAndHoldCoordinate:)]\n   */\n  tapHold(x: number, y: number, duration: number) {\n    return this.http.fetch('post', '/wda/touchAndHold', { x, y, duration })\n  }\n\n  /**\n   * \n   * @param fromX position fromX\n   * @param fromY position fromY\n   * @param toX position toX\n   * @param toY position toY\n   * @param duration start coordinate press duration (seconds)\n   * \n   * [[FBRoute POST:@\"/wda/dragfromtoforduration\"] respondWithTarget:self action:@selector(handleDragCoordinate:)]\n   */\n  swipe(fromX: number, fromY: number, toX: number, toY: number, duration: number = 0) {\n    return this.http.fetch('post', '/wda/dragfromtoforduration', { fromX, fromY, toX, toY, duration })\n  }\n\n  async swipeLeft() {\n    const { width, height } = await this.getWindowSize()\n    return this.swipe(width / 2 + 150, height / 2, width / 2 - 150, height / 2)\n  }\n\n  async swipeRight() {\n    const { width, height } = await this.getWindowSize()\n    return this.swipe(width / 2 - 150, height / 2, width / 2 + 150, height / 2)\n  }\n\n  async swipeUp() {\n    const { width, height } = await this.getWindowSize()\n    return this.swipe(width / 2, height / 2 + 150, width / 2, height / 2 - 150)\n  }\n\n  async swipeDown() {\n    const { width, height } = await this.getWindowSize()\n    return this.swipe(width / 2, height / 2 - 150, width / 2, height / 2 + 150)\n  }\n\n  /**\n   * @param orientation  LANDSCAPE | PORTRAIT | UIA_DEVICE_ORIENTATION_LANDSCAPERIGHT |\n                    UIA_DEVICE_ORIENTATION_PORTRAIT_UPSIDEDOWN\n   */\n  async orientation(orientation?: string) {\n    const { value } = !orientation ? await this.http.fetch('get', 'orientation') : await this.http.fetch('post', 'orientation', { orientation })\n    return value\n  }\n\n  alert(): Alert {\n    return new Alert(this)\n  }\n\n  async keys(value: string, frequency?: number) {\n    let payload: object = { 'value': value }\n    if (frequency) {\n      payload = { ...payload, frequency }\n    }\n\n    return await this.http.fetch('post', '/wda/keys', payload);\n  }\n\n  close() {\n    return this.http.fetch('delete', '/')\n  }\n\n  selector(selectorObj: SelectorObj) {\n    const httpclient = this.http.newClient('')\n    return new Selector(httpclient, this, selectorObj)\n  }\n\n  /**\n   * get window size\n   */\n  private async getWindowSize(): Promise<{ width: number, height: number }> {\n    const { value } = await this.http.fetch('get', '/window/size')\n    return value\n  }\n\n}\n\nexport default Session\n","import HTTPClient from './httpclient'\nimport Session from './session'\nimport fs from 'fs'\n\nclass Client {\n  http: HTTPClient\n\n  // Args:\n  // target (string): the device url\n\n  // If target is None, set to \"http://localhost:8100\"\n  constructor(url: string = 'http://localhost:8100') {\n    this.http = new HTTPClient(url)\n  }\n\n  async status() {\n    const res = await this.http.fetch('get', 'status')\n\n    return res\n  }\n\n  async home() {\n    // Press home button\n    return await this.http.fetch('post', '/wda/homescreen')\n  }\n\n  async lock() {\n    // Lock device\n    return await this.http.fetch('post', '/wda/lock')\n  }\n\n  async unlock() {\n    // Lock device\n    return await this.http.fetch('post', '/wda/unlock')\n  }\n\n  async healthcheck() {\n    // Hit healthcheck\n    return await this.http.fetch('get', '/wda/healthcheck')\n  }\n\n  async source(format: 'xml' | 'json' = 'xml', accessible: boolean = false) {\n    // Args:\n    //   format (str): only 'xml' and 'json' source types are supported\n    //   accessible (bool): when set to true, format is always 'json'\n    let res: any\n    if (accessible) {\n      res = await this.http.fetch('get', '/wda/accessibleSource')\n    } else {\n      res = await this.http.fetch('get', 'source?format=' + format)\n    }\n    return res.value\n  }\n\n  async session(bundleId?: string, args: string[] = [], environment: any = {}) {\n    // Args:\n    //     - bundle_id (str): the app bundle id\n    //     - arguments (list): ['-u', 'https://www.google.com/ncr']\n    //     - enviroment (dict): {\"KEY\": \"VAL\"}\n    // WDA Return json like\n    // {\n    //     \"value\": {\n    //         \"sessionId\": \"69E6FDBA-8D59-4349-B7DE-A9CA41A97814\",\n    //         \"capabilities\": {\n    //             \"device\": \"iphone\",\n    //             \"browserName\": \"部落冲突\",\n    //             \"sdkVersion\": \"9.3.2\",\n    //             \"CFBundleIdentifier\": \"com.supercell.magic\"\n    //         }\n    //     },\n    //     \"sessionId\": \"69E6FDBA-8D59-4349-B7DE-A9CA41A97814\",\n    //     \"status\": 0\n    // }\n    // To create a new session, send json data like\n    // {\n    //     \"capabilities\": {\n    //         \"bundleId\": \"your-bundle-id\",\n    //         \"app\": \"your-app-path\"\n    //         \"shouldUseCompactResponses\": (bool),\n    //         \"shouldUseTestManagerForVisibilityDetection\": (bool),\n    //         \"maxTypingFrequency\": (integer),\n    //         \"arguments\": (list(str)),\n    //         \"environment\": (dict: str->str)\n    //     },\n    // }\n\n    if (!bundleId) {\n      const status = await this.status()\n      const sid = status['sessionId']\n      if (!sid) {\n        throw 'no session created ever'\n      }\n\n      const http = this.http.newClient('session/' + sid)\n      const { value } = await http.fetch('get', '/')\n      return await new Session(http, value)\n    }\n\n    if (!Array.isArray(args)) {\n      throw 'arguments must be a array'\n    }\n\n    if (typeof environment !== 'object') {\n      throw 'environment must be a object'\n    }\n\n    const capabilities = {\n      bundleId,\n      arguments: args,\n      environment,\n      shouldWaitForQuiescence: true,\n    }\n\n    const data = {\n      capabilities: capabilities\n    }\n\n    const res = await this.http.fetch('post', 'session', data)\n    const httpclient = this.http.newClient('session/' + res.sessionId)\n    const { value } = await httpclient.fetch('get', '/')\n    return new Session(httpclient, value)\n  }\n\n  /**\n   * Screenshot with PNG format\n   * \n   * @param pngFilename optional, save file name\n   * @return png raw data\n   */\n  async screenshot(pngFilename: string = 'screenshot.png') {\n    const { value } = await this.http.fetch('get', 'screenshot')\n    fs.writeFileSync(pngFilename, value, 'base64')\n    return value\n  }\n}\n\nexport default Client\n","import Client from './instance/client'\n\nconst wda = {\n  Client\n}\n\nmodule.exports = wda"],"names":["axios","fs"],"mappings":"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"}